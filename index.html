<!DOCTYPE html>
<html class="uk-height-1-1 uk-background-fixed uk-background-center-center" style="background-image: url(src/bg.jpg);">
    <head>
        <title>스마트 공유 모빌리티, 타고벌자</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="css/uikit.css" />
        <link href="https://fonts.googleapis.com/css?family=Black+Han+Sans|Noto+Sans+KR:300&display=swap&subset=korean" rel="stylesheet">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <script src="js/uikit.min.js"></script>
        <script src="js/uikit-icons.min.js"></script>
    </head>

    <body class="uk-height-1-1 ">
      <!-- nav -->
      <div id="nav" class="uk-text-center" uk-sticky="sel-target: .uk-navbar-container; cls-active: uk-navbar-sticky" style="height:90px;">
      	<nav class="uk-height-1-1 uk-navbar uk-navbar-container" style="background: transparent">
          <div class="uk-width-1-6"></div>
      	  <div class="uk-width-2-3 uk-animation-toggle" tabindex="0">

      	    <div class="uk-animation-shake uk-margin-top">
              <a id="logo" onclick="showbody1()" href="#" uk-totop uk-scroll>
                <span class="uk-heading-small" style="font-family: 'Black Han Sans', sans-serif; color: #F3F3F2;">
        			    타고벌자
        	      </span>
              </a>
            </div>
          </div>
          <div class="uk-width-1-6 uk-flex uk-flex-right uk-flex-top">
            <img class="uk-profile-small uk-border-circle uk-margin-right uk-margin-top" src="src/profile.png" uk-toggle="target: #offcanvas-flip">
          </div>
      	</nav>
      </div>

      <!-- my page history -->
      <div id="offcanvas-flip" uk-offcanvas="flip: true; overlay: true">
        <div class="uk-offcanvas-bar">
          <button class="uk-offcanvas-close" type="button" uk-close></button>
          <h3>History</h3>
          <p>최근 결제 및 보상 내역을 확인하세요</p>
          <ul class="uk-list uk-list-divider">
              <li>List item 1</li>
              <li>List item 2</li>
              <li>List item 3</li>
          </ul>
        </div>
      </div>

      <!-- body 1 -->
      <div id="body1" class="uk-height-1-nav uk-text-center">
        <div class="uk-inline uk-divider-vertical"></div>
        <form class="uk-text-middle">
          <div class="uk-margin-bottom">
            <div class="uk-inline uk-width-medium uk-width-1-3@m">
                <span class="uk-form-icon" uk-icon="icon: location" style="color: #fff;"></span>
                <input class="autocomplete-input uk-input uk-padding-medium" autocomplete="on" placeholder="출발지" type="text" placeholder="Large" style="font-family: 'Noto Sans KR', sans-serif; color:#fff; background: transparent;">
                <div class="custom-select autocomplete-dropdown uk-width-1-1" style="display:none; position:absolute; z-index:1;">
                  <select class="autocomplete-list uk-width-1-1 uk-select uk-padding-medium" name="list" style="font-family: 'Noto Sans KR', sans-serif;">
                    <option value="0">Select</option>
                  </select>
                </div>
            </div>
          </div>
          <div>
            <div class="uk-inline uk-width-medium uk-width-1-3@m">
                <span class="uk-form-icon" uk-icon="icon: location" style="color: #fff;"></span>
                <input class="autocomplete-input uk-input uk-padding-medium" autocomplete="on" placeholder="도착지" type="text" placeholder="Large" style="font-family: 'Noto Sans KR', sans-serif; color:#fff; background: transparent;">
                <div class="custom-select autocomplete-dropdown uk-width-1-1" style="display:none; position:absolute; z-index:1;">
                  <select class="autocomplete-list uk-width-1-1 uk-select uk-padding-medium" name="list" style="font-family: 'Noto Sans KR', sans-serif;">
                    <option value="0">Select</option>
                  </select>
                </div>
            </div>
          </div>
        </form>
        <div class="uk-inline uk-divider-vertical"></div>
        <div>
          <div id="spinner" uk-spinner style="display:none;"></div>
          <a id="go" onclick="showbody2()" href="#body2" uk-scroll>
            <button class="uk-width-1-4 uk-width-small@s uk-button-default uk-margin-bottom">
              <div class="uk-margin-small-top uk-margin-small-bottom">
                <span class="uk-text-medium" style="font-family: 'Noto Sans KR', sans-serif;">GO!</span>
              </div>
            </button>
          </a>
        </div>
      </div>
      <script src="js/functions.js"></script>

      <!-- empty space -->
      <div id="emptydiv" class="uk-height-small" style="display:none;"></div>

      <!-- Modal -->
      <div id="modal-example" uk-modal>
          <div class="uk-modal-dialog uk-modal-body">
              <h2 class="uk-modal-title">CHECK</h2>
              <p>결제 전 출발지 정보를 다시 한번 확인해주세요.</p>
              <p id="departure"></p>
              <p class="uk-text-right">
                  <button class="uk-button uk-button-secondary uk-modal-close" type="button">취소</button>
                  <button class="uk-button uk-button-primary" type="button">결제</button>
              </p>
          </div>
      </div>

      <!-- body 2 -->
      <div id="body2" class="uk-height-1-nav" style="display:none;">
        <div class="uk-text-center" style="height:22%">
            <span class="uk-text-medium" style="font-family: 'Noto Sans KR', sans-serif; color: #F3F3F2;">
              도착지 근처 정류장들의 인센티브를 확인하세요
            </span>
          <div class="uk-margin-top">
            <button class="uk-width-1-4 uk-width-small@s uk-button-default" type="button" uk-toggle="target: #modal-example">
              <div class="uk-margin-small-top uk-margin-small-bottom">
                <span class="uk-text-medium" style="font-family: 'Noto Sans KR', sans-serif;">OK</span>
              </div>
            </button>
          </div>
        </div>
        <div id="mapid" class="uk-width-1-1" style="height:78%; margin:0px;"></div>
      </div>
    </body>
</html>

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css"
integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
crossorigin=""/>
<script src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js"
integrity="sha512-GffPMF3RvMeYyc1LWMHtK8EbPv0iNZ8/oTtHPx9/cc2ILxQ+u905qIwdpULaqDkyBKgOaB57QTMg7ztg8Jm2Og=="
crossorigin=""></script>
<script>
  // 일단 홍대입구로 다 해둠.
  var _candidates = [
    [37.5575,126.9245],
    [37.5575,126.9245],
    [37.5575,126.9245],
    [37.5575,126.9245],
    [37.5575,126.9245],
    [37.5575,126.9245],
    [37.5575,126.9245],
    [37.5575,126.9245],
    [37.5575,126.9245],
    [37.5575,126.9245],
  ];
  function updateMap ( candidates ) {
    // 지도 중심 계산
    var lat_mean = 0;
    var long_mean = 0;
    for (var i=0;i<candidates.length;i++){
      lat_mean += candidates[i][0];
      long_mean += candidates[i][1];
    }
    lat_mean /= 10;
    long_mean /= 10;

    // 지도 객체 추가
    var mymap = L.map('mapid').setView([lat_mean,long_mean], 14);
    L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
      attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
      maxZoom: 18,
      id: 'mapbox.streets',
      // 용환 mapbox public accesToken (이대로 두면 됨)
      accessToken: 'pk.eyJ1IjoiZXJpYy15b28iLCJhIjoiY2swMG45M29uMDVjNzNtbGs3Zm01ODVlaiJ9.xUr6rCrxrGVEsaV-vf7fFw'
    }).addTo(mymap);

    // 마커 추가
    for (var i=0;i<candidates.length;i++){
      var marker = L.marker(candidates[i]).addTo(mymap);
    }
  }
  updateMap(_candidates);
</script>
